$(function(){$.fn.extend({starRate:function(){return $(this).each(function(k,f){var d=$(f),e=$("span",d),h=$("input",d),c=new function(){var b=this,c=function(a,b,d,c){$(a).bind(b,function(){var b=$(e).index(a);$(e).each(function(a,c){a<=b?$(c).addClass(d):$(c).removeClass(d)});"function"==typeof c&&c()})},g=function(a){d.attr("lv",a);h.val(a)},f=function(){e.each(function(a,b){c(b,"mouseenter","hover");c(b,"click","chked",function(){var a=e.index(b)+1;g(a)})});d.bind("mouseleave",function(){e.removeClass("hover")})};
b.clickStar=function(a){a&&0!=a&&e.eq(a-1).trigger("click")};b.refresh=function(){g(0);e.removeClass("chked")};b.initLv=function(a){a&&0!=a?(b.clickStar(a),g(a)):b.refresh()};b.init=function(){f()}};d.data("starRate",c);c.init()})}})});